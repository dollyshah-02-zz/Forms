<h3>Template Driven Form</h3>

<form novalidate class="forms" #f="ngForm" (ngSubmit)="onSubmit()">
  <fieldset ngModelGroup="name">
    <!-- <pre>{{f.form.controls.firstName?.dirty}}</pre> -->
    <div class="form-group">
      <label>First Name</label>
      <input type="text" class="form-control" name="firstName" [(ngModel)]="user.firstName" required [ngClass]="{
        'has-danger': f.form.controls.name?.controls.firstName?.invalid && (f.form.controls.name?.controls.firstName?.dirty || f.form.controls.name?.controls.firstName?.touched),
        'has-success': f.form.controls.name?.controls.firstName?.valid && (f.form.controls.name?.controls.firstName?.dirty || f.form.controls.name?.controls.firstName?.touched)
   }">
    </div>
    <div *ngIf="f.form.controls.name?.controls.firstName?.errors && (f.form.controls.name?.controls.firstName?.dirty || f.form.controls.name?.controls.firstName?.touched)">
      <p *ngIf="f.form.controls.name?.controls.firstName?.errors.required">First Name is required</p>
    </div>

    <div class="form-group">
      <label>Last Name</label>
      <input type="text" class="form-control" name="lastName" [(ngModel)]="user.lastName" required [ngClass]="{
        'has-danger': f.form.controls.name?.controls.lastName?.invalid && (f.form.controls.name?.controls.lastName?.dirty || f.form.controls.name?.controls.lastName?.touched),
        'has-success': f.form.controls.name?.controls.lastName?.valid && (f.form.controls.name?.controls.lastName?.dirty || f.form.controls.name?.controls.lastName?.touched)
   }">
    </div>
    <div *ngIf="f.form.controls.name?.controls.lastName?.errors && (f.form.controls.name?.controls.lastName?.dirty || f.form.controls.name?.controls.lastName?.touched)">
      <p *ngIf="f.form.controls.name?.controls.lastName?.errors.required">Last Name is required</p>
    </div>
  </fieldset>

  <div class="form-group">
    <label>Email</label>
    <input type="email" class="form-control" name="email" [(ngModel)]="user.email" required pattern="[A-Za-z0-9_.]+@[A-Za-z0-9]+\.(com|org)"
      [ngClass]="{
      'has-danger': f.form.controls.email?.invalid && (f.form.controls.email?.dirty || f.form.controls.email?.touched),
      'has-success': f.form.controls.email?.valid && (f.form.controls.email?.dirty || f.form.controls.email?.touched)
 }">
  </div>
  <div *ngIf="f.form.controls.email?.errors && (f.form.controls.email?.dirty || f.form.controls.email?.touched)">
    <p *ngIf="f.form.controls.email?.errors.required">Email is required</p>
    <p *ngIf="f.form.controls.email?.errors.pattern">Email must contain at least the @ character</p>
  </div>

  <div class="form-group">
    <label>Password</label>
    <input type="password" class="form-control" name="password" [(ngModel)]="user.password" required minlength="8"
      [ngClass]="{
      'has-danger': f.form.controls.password?.invalid && (f.form.controls.password?.dirty || f.form.controls.password?.touched),
      'has-success': f.form.controls.password?.valid && (f.form.controls.password?.dirty || f.form.controls.name.controls.password?.touched)
 }">
  </div>
  <div *ngIf="f.form.controls.password?.errors && (f.form.controls.password?.dirty || f.form.controls.password?.touched)">
    <p *ngIf="f.form.controls.password?.errors.required">Password is required</p>
    <p *ngIf="f.form.controls.password?.errors.minlength">password must contain at least the 8 characters</p>
  </div>

  <div class="form-group">
    <label>Language</label>
    <select class="form-control" name="language" [(ngModel)]="user.language" required [ngClass]="{
      'has-danger': f.form.controls.language?.invalid && (f.form.controls.language?.dirty || f.form.controls.language?.touched),
      'has-success': f.form.controls.language?.valid && (f.form.controls.language?.dirty || f.form.controls.language?.touched)
 }">
      <option *ngFor="let lang of languages" [value]="lang">
        {{lang}}
      </option>
    </select>
  </div>
  <div *ngIf="f.form.controls.language?.errors && (f.form.controls.language?.dirty || f.form.controls.language?.touched)">
    <p *ngIf="f.form.controls.language?.errors.required">language is required</p>
  </div>
  <input type="submit" value="Submit" class="btn btn-default">
</form>
<!-- <pre>Dirty?{{f.form.controls.name.controls.firstName?.dirty}}</pre>
<pre>Valid? {{f.form.controls.firstName?.valid}}</pre>
<pre>Dirty? {{f.form.controls.email?.dirty}}</pre>
<pre>Touched? {{f.form.controls.email?.touched}}</pre> -->
<!-- <pre>{{f.value | json}}</pre> -->